(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{25:function(t,e,n){},91:function(t,e,n){},92:function(t,e,n){"use strict";n.r(e);var s=n(1),a=n(21),i=n.n(a),o=n(14),c=n(15),r=n(16),l=n(19),u=n(17),d=n(93),h=n(94),j=n(95),p=n(96),b=n(103),O=n(97),g=n(98),m=n(99),x=n(100),v=n(101),f=n(102),y=n(18),S="AUTH_ERROR",C="LOGIN_SUCCESS",w="LOGIN_FAIL",A="LOGOUT_SUCCESS",E="REGISTER_SUCCESS",N="REGISTER_FAIL",R="GET_STATUS",k="CLEAR_STATUS",L="BUTTON_CLICKED",T="BUTTON_RESET",_="AUTH_SUCCESS",I="AUTH_FAIL",U="IS_LOADING",D=function(){return function(t,e){t({type:L})}},G=function(){return function(t,e){t({type:U})}},M=n(23),z=n.n(M),B=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:R,payload:{msg:t,status:e,id:n}}};z.a.defaults.baseURL="http://localhost:5001";var F=n(13),J=(n(25),n(2)),P=function(t){Object(r.a)(n,t);var e=Object(l.a)(n);function n(){var t;Object(o.a)(this,n);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))).state={email:"",password:"",msg:""},t.onChange=function(e){t.setState(Object(u.a)({},e.target.name,e.target.value))},t.onSubmit=function(e){e.preventDefault();var n=t.state,s={email:n.email,password:n.password};t.props.isLoading(),t.props.login(s)},t}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.props.buttonClicked()}},{key:"componentDidUpdate",value:function(t){var e=this.props.status;e!==t.status&&"LOGIN_FAIL"===e.id&&this.setState({msg:e.statusMsg})}},{key:"render",value:function(){var t="divStyle";return this.props.button||(t="formStyle"),Object(J.jsx)("div",{className:t,children:Object(J.jsx)(d.a,{children:Object(J.jsxs)(h.a,{children:[Object(J.jsxs)(j.a,{children:[" ",Object(J.jsx)("h2",{children:Object(J.jsx)("strong",{children:"Login"})})]}),Object(J.jsxs)(p.a,{className:"text-muted",children:["Don't have an account?",Object(J.jsx)(F.b,{to:"/register",children:" Register. "})]}),Object(J.jsx)("br",{}),this.state.msg?Object(J.jsx)(b.a,{color:"danger",children:this.state.msg}):null,Object(J.jsx)(O.a,{onSubmit:this.onSubmit,children:Object(J.jsxs)(g.a,{children:[Object(J.jsx)(m.a,{for:"email",children:"E-mail"}),Object(J.jsx)(x.a,{type:"email",name:"email",id:"email",size:"lg",placeholder:"you@youremail.com",className:"mb-3",onChange:this.onChange}),Object(J.jsx)(m.a,{for:"password",children:"Password"}),Object(J.jsx)(x.a,{type:"password",name:"password",id:"password",size:"lg",placeholder:"Enter your Password",className:"mb-3",onChange:this.onChange}),Object(J.jsx)(v.a,{size:"lg",color:"dark",style:{marginTop:"2rem"},block:!0,children:this.props.loading?Object(J.jsxs)("span",{children:["Logging in.. ",Object(J.jsx)(f.a,{size:"sm",color:"light"})]}):Object(J.jsx)("span",{children:"Login"})})]})})]})})})}}]),n}(s.Component),V=Object(y.b)((function(t){return{button:t.ui.button,isAuthenticated:t.auth.isAuthenticated,status:t.status,loading:t.ui.loading}}),{login:function(t){var e=t.email,n=t.password;return function(t){var s=JSON.stringify({email:e,password:n});z.a.post("/api/users/login",s,{headers:{"Content-Type":"application/json; charset=utf-8","Access-Control-Allow-Origin":"http://localhost:5001","Access-Control-Allow-Credentials":!0,Vary:"Origin"}}).then((function(e){console.log(e),t({type:C,payload:e.data}),t({type:U})})).catch((function(e){var n,s;t(B(null===e||void 0===e||null===(n=e.response)||void 0===n?void 0:n.data,null===e||void 0===e||null===(s=e.response)||void 0===s?void 0:s.status,"LOGIN_FAIL")),t({type:w}),t({type:U})}))}},isLoading:G,buttonClicked:D})(P),H=function(t){Object(r.a)(n,t);var e=Object(l.a)(n);function n(){var t;Object(o.a)(this,n);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))).state={name:"",email:"",password:"",msg:""},t.onChange=function(e){t.setState(Object(u.a)({},e.target.name,e.target.value))},t.onSubmit=function(e){e.preventDefault();var n=t.state,s={name:n.name,email:n.email,password:n.password};t.props.isLoading(),t.props.register(s)},t}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.props.buttonClicked()}},{key:"componentDidUpdate",value:function(t){var e=this,n=this.props.status;n!==t.status&&("REGISTER_FAIL"===n.id?this.setState({msg:n.statusMsg}):this.setState({msg:this.props.status.statusMsg})),"REGISTER_SUCCESS"===n.id&&setTimeout((function(){e.props.history.push("/login")}),2e3)}},{key:"render",value:function(){var t,e="divStyle";return this.state.msg&&this.props.status.respCode>=400?t=Object(J.jsx)(b.a,{color:"danger",children:this.state.msg}):this.state.msg&&200===this.props.status.respCode&&(t=Object(J.jsxs)(b.a,{color:"success",children:[this.state.msg," ",Object(J.jsx)("br",{})," Redirecting to Log In screen"]})),this.props.button||(e="formStyle"),Object(J.jsx)("div",{className:e,children:Object(J.jsx)(d.a,{children:Object(J.jsxs)(h.a,{children:[Object(J.jsx)(j.a,{children:Object(J.jsx)("h2",{children:Object(J.jsx)("strong",{children:"Register"})})}),Object(J.jsxs)(p.a,{className:"text-muted",children:["Already have an account?",Object(J.jsx)(F.b,{to:"/login",children:" Log In. "})]}),Object(J.jsx)("br",{}),t,Object(J.jsx)(O.a,{onSubmit:this.onSubmit,children:Object(J.jsxs)(g.a,{className:"text-center",children:[Object(J.jsx)(m.a,{for:"name",children:"Name"}),Object(J.jsx)(x.a,{type:"text",name:"name",id:"name",placeholder:"Enter your name",className:"mb-3",size:"lg",onChange:this.onChange}),Object(J.jsx)(m.a,{for:"email",children:"E-mail"}),Object(J.jsx)(x.a,{type:"email",name:"email",id:"email",placeholder:"you@youremail.com",className:"mb-3",size:"lg",onChange:this.onChange}),Object(J.jsx)(m.a,{for:"password",children:"Password"}),Object(J.jsx)(x.a,{type:"password",name:"password",id:"password",placeholder:"Enter your Password",className:"mb-3",size:"lg",onChange:this.onChange}),Object(J.jsx)(v.a,{color:"dark",className:"mt-5",size:"lg",block:!0,children:this.props.loading?Object(J.jsxs)("span",{children:["Registering.. ",Object(J.jsx)(f.a,{size:"sm",color:"light"})]}):Object(J.jsx)("span",{children:"Register"})})]})})]})})})}}]),n}(s.Component),W=Object(y.b)((function(t){return{button:t.ui.button,status:t.status,loading:t.ui.loading}}),{register:function(t){var e=t.name,n=t.email,s=t.password;return function(t){var a=JSON.stringify({name:e,email:n,password:s});z.a.post("/api/users/register",a,{headers:{"Content-Type":"application/json; charset=utf-8","Access-Control-Allow-Origin":"http://localhost:5001","Access-Control-Allow-Credentials":!0,Vary:"Origin"}}).then((function(e){t(B(e.data,e.status,"REGISTER_SUCCESS")),t({type:U})})).catch((function(e){var n,s;t(B(null===e||void 0===e||null===(n=e.response)||void 0===n?void 0:n.data,null===e||void 0===e||null===(s=e.response)||void 0===s?void 0:s.status,"REGISTER_FAIL")),t({type:N}),t({type:U})}))}},isLoading:G,buttonClicked:D})(H),X=n(7),K=n(22),Y=n(51),$=n(9),q={isAuthenticated:null,user:null},Q={button:!0,loading:!1},Z={statusMsg:{},respCode:null,id:null},tt=Object(K.b)({auth:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case E:return Object($.a)(Object($.a)({},t),{},{user:e.payload});case C:case _:return Object($.a)(Object($.a)({},t),{},{isAuthenticated:!0,user:e.payload});case S:case w:case A:case N:case I:return Object($.a)(Object($.a)({},t),{},{user:null,isAuthenticated:!1});default:return t}},ui:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case L:return Object($.a)(Object($.a)({},t),{},{button:!1});case T:return Object($.a)(Object($.a)({},t),{},{button:!0});case U:return Object($.a)(Object($.a)({},t),{},{loading:!t.loading});default:return t}},status:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case R:return{statusMsg:e.payload.msg,respCode:e.payload.status,id:e.payload.id};case k:return{statusMsg:{},respCode:null,id:null};default:return t}}}),et=[Y.a],nt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||K.c,st=Object(K.d)(tt,{},nt(K.a.apply(void 0,et))),at={color:"white"},it=function(t){Object(r.a)(n,t);var e=Object(l.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"componentDidMount",value:function(){st.dispatch((function(t){z.a.get("/api/users/authchecker",{headers:{headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"http://localhost:5001","Access-Control-Allow-Credentials":!0}}}).then((function(e){return t({type:_,payload:e.data})})).catch((function(e){t({type:I})}))}))}},{key:"render",value:function(){return this.props.isAuthenticated?Object(J.jsx)(X.a,{to:"/profile"}):Object(J.jsx)("div",{className:"container",children:Object(J.jsxs)("div",{className:"main",children:[Object(J.jsxs)("h1",{style:at,children:[" ",Object(J.jsx)("strong",{children:"MERN"})," Sessions Auth App "]}),Object(J.jsx)("br",{}),Object(J.jsxs)("h5",{style:at,children:["Minimalistic Sessions based Authentication app ",Object(J.jsx)("span",{role:"img","aria-label":"lock",children:"\ud83d\udd12 "}),Object(J.jsx)("br",{}),"Built with React + Redux, NodeJS, Express, MongoDB and Bootstrap"]}),Object(J.jsxs)("h5",{style:at,children:["Uses Cookies ",Object(J.jsx)("span",{role:"img","aria-label":"lock",children:"\ud83c\udf6a "})]}),Object(J.jsx)("br",{}),Object(J.jsxs)("div",{children:[Object(J.jsxs)(X.d,{children:[Object(J.jsx)(X.b,{exact:!0,path:"/login",component:V}),Object(J.jsx)(X.b,{exact:!0,path:"/register",component:W})]}),this.props.button&&Object(J.jsx)(F.b,{className:"divStyle",to:"/login",children:Object(J.jsx)(v.a,{size:"lg",color:"light",children:"Sign In"})}),this.props.button&&Object(J.jsx)(F.b,{className:"divStyle",to:"/register",children:Object(J.jsx)(v.a,{size:"lg",color:"light",children:"Register"})})]})]})})}}]),n}(s.Component),ot=Object(y.b)((function(t){return{button:t.ui.button,isAuthenticated:t.auth.isAuthenticated}}))(it),ct=n(33),rt=n(52),lt=function(t){Object(r.a)(n,t);var e=Object(l.a)(n);function n(t){var s;return Object(o.a)(this,n),(s=e.call(this,t)).onLogout=function(t){t.preventDefault(),s.props.buttonReset(),s.props.logout()},s.handleGetResult=Object(rt.a)(Object(ct.a)().mark((function t(){return Object(ct.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=usd").then((function(t){return t.json()})).then((function(t){var e=s.props.authState.user,n=Number(null===e||void 0===e?void 0:e.balance);s.setState({result:Number(null===t||void 0===t?void 0:t.bitcoin.usd)*n})}));case 2:t.sent;case 3:case"end":return t.stop()}}),t)}))),s.state={result:0},s}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.handleGetResult()}},{key:"render",value:function(){var t;if(!this.props.authState.isAuthenticated)return Object(J.jsx)(X.a,{to:"/"});var e=this.props.authState.user;return Object(J.jsx)("div",{className:"container",children:Object(J.jsx)("div",{className:"main",children:Object(J.jsx)(d.a,{children:Object(J.jsxs)(h.a,{children:[Object(J.jsx)(j.a,{children:Object(J.jsxs)("h1",{children:[e?"Welcome, ".concat(e.name):""," ",Object(J.jsxs)("span",{role:"img","aria-label":"party-popper",children:["\ud83c\udf89"," "]})," "]})}),Object(J.jsx)("br",{}),Object(J.jsxs)(p.a,{children:["Amount ",Object(J.jsxs)("h5",{children:[null===(t=this.state)||void 0===t?void 0:t.result," "]})]}),Object(J.jsx)("br",{}),Object(J.jsx)(p.a,{children:Object(J.jsxs)("h5",{children:[" ","You are now Logged In"," ",Object(J.jsxs)("span",{role:"img","aria-label":"clap",children:["\ud83d\udc4f"," "]})]})}),Object(J.jsx)("br",{}),Object(J.jsx)(v.a,{size:"lg",onClick:this.onLogout,color:"primary",children:"Logout"})]})})})})}}]),n}(s.Component),ut=Object(y.b)((function(t){return{button:t.ui.button,authState:t.auth}}),{logout:function(){return function(t){z.a.delete("/api/users/logout",{headers:{headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"http://localhost:5001","Access-Control-Allow-Credentials":!0,Vary:"Origin"}}}).then((function(e){return t({type:A})})).catch((function(t){console.log(t)}))}},buttonReset:function(){return function(t,e){t({type:T})}}})(lt),dt=(n(90),n(91),function(t){Object(r.a)(n,t);var e=Object(l.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return Object(J.jsxs)(y.a,{store:st,children:[Object(J.jsx)(X.d,{children:Object(J.jsx)(X.b,{exact:!0,path:"/profile",component:ut})}),Object(J.jsx)(ot,{})]})}}]),n}(s.Component)),ht=dt;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(J.jsx)(F.a,{basename:"/sessions-auth-app",children:Object(J.jsx)(ht,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[92,1,2]]]);
//# sourceMappingURL=main.392bce45.chunk.js.map